{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nconst form = document.getElementById('form');\nconst input = document.getElementById('search');\nconst loader = document.getElementById('loader-center');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\nconst loadMoreContainer = document.getElementById('load-more-container');\nconst loaderBelowButton = document.getElementById('loader-below-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst API_KEY = '51314790-8eb7b58c862d15e75f23e4ac3';\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 40;\n\niziToast.settings({\n  position: `topRight`,\n});\n\nasync function fetchImages(query, page = 1) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: `photo`,\n    orientation: `horizontal`,\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(url, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fething images:', error);\n    return { hits: [], totalHits: 0 };\n  }\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = input.value.trim();\n  input.value = '';\n  if (query === '') return;\n\n  currentQuery = query;\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loader.classList.remove('hidden');\n  loadMoreContainer.classList.add('hidden');\n\n  const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n\n  loader.classList.add('hidden');\n\n  if (hits.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n\n  renderGallery(hits);\n\n  if (totalHits > perPage) {\n    loadMoreContainer.classList.remove('hidden');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loaderBelowButton.classList.remove('hidden');\n\n  const { hits } = await fetchImages(currentQuery, currentPage);\n\n  loaderBelowButton.classList.add('hidden');\n\n  if (hits.length > 0) {\n    renderGallery(hits);\n\n    const firstCard = document.querySelector('.gallery a');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } else {\n    loadMoreContainer.classList.add('hidden');\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results\",\n    });\n  }\n});\n\nfunction renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <a href=\"${largeImageURL}\" class=\"photo-card\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n        <div class=\"info\">\n          <p><b>Likes</b><br> ${likes}</p>\n          <p><b>Views</b><br> ${views}</p>\n          <p><b>Comments</b><br> ${comments}</p>\n          <p><b>Downloads</b><br> ${downloads}</p>\n        </div>\n      </a>\n    `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n"],"names":["form","input","loader","gallery","loadMoreBtn","loadMoreContainer","loaderBelowButton","lightbox","SimpleLightbox","API_KEY","currentQuery","currentPage","perPage","iziToast","fetchImages","query","page","url","params","axios","error","event","hits","totalHits","renderGallery","firstCard","cardHeight","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"wyBAQA,MAAMA,EAAO,SAAS,eAAe,MAAM,EACrCC,EAAQ,SAAS,eAAe,QAAQ,EACxCC,EAAS,SAAS,eAAe,eAAe,EAChDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAoB,SAAS,eAAe,qBAAqB,EACjEC,EAAoB,SAAS,eAAe,qBAAqB,EAEjEC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAU,qCAChB,IAAIC,EAAe,GACfC,EAAc,EAClB,MAAMC,EAAU,GAEhBC,EAAS,SAAS,CAChB,SAAU,UACZ,CAAC,EAED,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC1C,MAAMC,EAAM,2BACNC,EAAS,CACb,IAAKT,EACL,EAAGM,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUJ,CACd,EAEE,GAAI,CAEF,OADiB,MAAMO,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACjB,OAAQE,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EACrC,CAAE,KAAM,CAAA,EAAI,UAAW,CAAC,CAChC,CACH,CAEApB,EAAK,iBAAiB,SAAU,MAAMqB,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMN,EAAQd,EAAM,MAAM,KAAI,EAE9B,GADAA,EAAM,MAAQ,GACVc,IAAU,GAAI,OAElBL,EAAeK,EACfJ,EAAc,EACdR,EAAQ,UAAY,GACpBD,EAAO,UAAU,OAAO,QAAQ,EAChCG,EAAkB,UAAU,IAAI,QAAQ,EAExC,KAAM,CAAE,KAAAiB,EAAM,UAAAC,CAAW,EAAG,MAAMT,EAAYJ,EAAcC,CAAW,EAIvE,GAFAT,EAAO,UAAU,IAAI,QAAQ,EAEzBoB,EAAK,SAAW,EAAG,CACrBT,EAAS,MAAM,CACb,QACE,0EACR,CAAK,EACD,MACD,CAEDW,EAAcF,CAAI,EAEdC,EAAYX,GACdP,EAAkB,UAAU,OAAO,QAAQ,CAE/C,CAAC,EAEDD,EAAY,iBAAiB,QAAS,SAAY,CAChDO,GAAe,EACfL,EAAkB,UAAU,OAAO,QAAQ,EAE3C,KAAM,CAAE,KAAAgB,CAAI,EAAK,MAAMR,EAAYJ,EAAcC,CAAW,EAI5D,GAFAL,EAAkB,UAAU,IAAI,QAAQ,EAEpCgB,EAAK,OAAS,EAAG,CACnBE,EAAcF,CAAI,EAElB,MAAMG,EAAY,SAAS,cAAc,YAAY,EACrD,GAAIA,EAAW,CACb,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACL,MACIrB,EAAkB,UAAU,IAAI,QAAQ,EACxCQ,EAAS,KAAK,CACZ,QAAS,2DACf,CAAK,CAEL,CAAC,EAED,SAASW,EAAcG,EAAQ,CAC7B,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,iBACEL,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,gCAEdC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,KAKxC,EACA,KAAK,EAAE,EAEVhC,EAAQ,mBAAmB,YAAayB,CAAM,EAE9CrB,EAAS,QAAO,CAClB"}